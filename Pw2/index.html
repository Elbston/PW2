<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <title>Adicionar Veículo</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="bg-light">
    <div class="container mt-4">
        <!-- Botão fixo no topo -->
        <div class="d-flex justify-content-end mb-3">
            <a href="listar.html" class="btn btn-outline-primary">← Voltar para Lista</a>
        </div>

        <div class="card shadow p-4 rounded-4 mx-auto" style="max-width: 600px;">
            <h2 class="mb-4 text-center">Adicionar Novo Veículo</h2>

            <form id="form1">
                <div class="mb-3">
                    <label for="placa" class="form-label">Placa</label>
                    <input type="text" class="form-control" name="placa" id="placa" required>
                </div>

                <div class="mb-3">
                    <label for="marca" class="form-label">Marca</label>
                    <input type="text" class="form-control" name="marca" id="marca">
                </div>

                <div class="mb-3">
                    <label for="modelo" class="form-label">Modelo</label>
                    <input type="text" class="form-control" name="modelo" id="modelo">
                </div>

                <div class="mb-3">
                    <label for="ano_fabric" class="form-label">Ano de Fabricação</label>
                    <input type="text" class="form-control" name="ano_fabric" id="ano_fabric">
                </div>

                <div class="mb-3">
                    <label for="cor" class="form-label">Cor</label>
                    <input type="text" class="form-control" name="cor" id="cor">
                </div>

                <div class="d-flex justify-content-between">
                    <button type="button" class="btn btn-success" onclick="salvar()">Salvar</button>
                    <a href="listar.html" class="btn btn-secondary">Voltar para Lista</a>
                </div>
            </form>

            <div class="alert alert-info mt-4 text-center" id="msg" style="display: none;"></div>
        </div>
    </div>

    <script>
        function salvar() {
            const form = document.getElementById('form1');
            const formData = new FormData(form);

            const ajax = new XMLHttpRequest();
            ajax.open("POST", "https://mauricio.inf.br/p6/api/add/", true);
            ajax.send(formData);

            ajax.onreadystatechange = function () {
                if (ajax.readyState == 4 && ajax.status == 200) {
                    document.getElementById('msg').style.display = 'block';
                    document.getElementById('msg').innerText = 'Veículo adicionado com sucesso!';
                    form.reset();
                }
            }
        }
    </script>
</body>
</html>
